/**
 *
 * @module jfseb.fdevstart.analyze
 * @file analyze.ts
 * @copyright (c) 2016 Gerd Forstmann
 */
"use strict";

var InputFilter = require("./inputFilter");
var debug = require("debug");
var debuglog = debug('analyze');
var logger = require("../utils/logger");
var perf = logger.perf('analyze');
var Toolmatcher = require("./toolmatcher");
var Sentence = require("./sentence");
function analyzeAll(sString, rules, aTools, words) {
    "use strict";

    if (sString.length === 0) {
        return [];
    } else {
        perf('analyzeString');
        //   InputFilter.resetCnt();
        var matched = InputFilter.analyzeString(sString, rules, words);
        perf('analyzeString');
        //   InputFilter.dumpCnt();
        perf('expand');
        debuglog("After matched " + JSON.stringify(matched));
        var aSentences = InputFilter.expandMatchArr(matched);
        aSentences.sort(Sentence.cmpRankingProduct);
        debuglog("after expand" + aSentences.map(function (oSentence) {
            return Sentence.rankingProduct(oSentence) + ":" + Sentence.dumpNice(oSentence);
        }).join("\n"));
        if (debuglog.enabled) {
            debuglog(" after expand:" + Sentence.dumpNiceArr(aSentencesReinforced, Sentence.rankingProduct));
        }
        perf('expand');
        var aSentencesReinforced = InputFilter.reinForce(aSentences);
        //aSentences.map(function(oSentence) { return InputFilter.reinForce(oSentence); });
        aSentencesReinforced.sort(Sentence.cmpRankingProduct);
        debuglog("after reinforce \n" + aSentencesReinforced.map(function (oSentence) {
            return Sentence.rankingProduct(oSentence) + ":" + Sentence.dumpNice(oSentence);
        }).join("\n"));
        if (debuglog.enabled) {
            debuglog(" after reinforce:" + Sentence.dumpNiceArr(aSentencesReinforced, Sentence.rankingProduct));
        }
        aSentencesReinforced = Sentence.cutoffSentenceAtRatio(aSentencesReinforced);
        perf('matchTools');
        var matchedTools = Toolmatcher.matchTools(aSentencesReinforced, aTools); //aTool: Array<IMatch.ITool>): any /* objectstream*/ {
        perf('matchTools');
        debuglog(" matchedTools" + JSON.stringify(matchedTools, undefined, 2));
        return matchedTools;
    }
}
exports.analyzeAll = analyzeAll;
/**
 * TODO: rework this to work correctly with sets
 */
function isComplete(match) {
    // TODO -> analyze sets
    return match && match.rank > 0.6 && Object.keys(match.toolmatchresult.missing || {}).length === 0;
}
exports.isComplete = isComplete;
function getPrompt(match) {
    if (!match) {
        return;
    }
    if (match.rank < 0.6) {
        return undefined;
    }
    if (Object.keys(match.toolmatchresult.missing).length) {
        var missing = Object.keys(match.toolmatchresult.missing)[0];
        return {
            category: missing,
            text: 'Please provide a missing "' + missing + '"?'
        };
    }
    return undefined;
}
exports.getPrompt = getPrompt;
function setPrompt(match, prompt, response) {
    if (!match) {
        return;
    }
    if (response.toLowerCase() !== 'cancel' && response.toLowerCase() !== 'abort') {
        var u = {};
        u.category = prompt.category;
        u._ranking = 1.0;
        u.matchedString = response;
        /// TODO test whether this can be valid at all?
        match.toolmatchresult.required[prompt.category] = u;
        delete match.toolmatchresult.missing[prompt.category];
    }
}
exports.setPrompt = setPrompt;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9tYXRjaC9hbmFseXplLnRzIl0sIm5hbWVzIjpbIklucHV0RmlsdGVyIiwicmVxdWlyZSIsImRlYnVnIiwiZGVidWdsb2ciLCJsb2dnZXIiLCJwZXJmIiwiVG9vbG1hdGNoZXIiLCJTZW50ZW5jZSIsImFuYWx5emVBbGwiLCJzU3RyaW5nIiwicnVsZXMiLCJhVG9vbHMiLCJ3b3JkcyIsImxlbmd0aCIsIm1hdGNoZWQiLCJhbmFseXplU3RyaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsImFTZW50ZW5jZXMiLCJleHBhbmRNYXRjaEFyciIsInNvcnQiLCJjbXBSYW5raW5nUHJvZHVjdCIsIm1hcCIsIm9TZW50ZW5jZSIsInJhbmtpbmdQcm9kdWN0IiwiZHVtcE5pY2UiLCJqb2luIiwiZW5hYmxlZCIsImR1bXBOaWNlQXJyIiwiYVNlbnRlbmNlc1JlaW5mb3JjZWQiLCJyZWluRm9yY2UiLCJjdXRvZmZTZW50ZW5jZUF0UmF0aW8iLCJtYXRjaGVkVG9vbHMiLCJtYXRjaFRvb2xzIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsImlzQ29tcGxldGUiLCJtYXRjaCIsInJhbmsiLCJPYmplY3QiLCJrZXlzIiwidG9vbG1hdGNocmVzdWx0IiwibWlzc2luZyIsImdldFByb21wdCIsImNhdGVnb3J5IiwidGV4dCIsInNldFByb21wdCIsInByb21wdCIsInJlc3BvbnNlIiwidG9Mb3dlckNhc2UiLCJ1IiwiX3JhbmtpbmciLCJtYXRjaGVkU3RyaW5nIiwicmVxdWlyZWQiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFPQTs7QUFFQSxJQUFBQSxjQUFBQyxRQUFBLGVBQUEsQ0FBQTtBQUVBLElBQUFDLFFBQUFELFFBQUEsT0FBQSxDQUFBO0FBRUEsSUFBTUUsV0FBV0QsTUFBTSxTQUFOLENBQWpCO0FBSUEsSUFBQUUsU0FBQUgsUUFBQSxpQkFBQSxDQUFBO0FBQ0EsSUFBSUksT0FBT0QsT0FBT0MsSUFBUCxDQUFZLFNBQVosQ0FBWDtBQU9BLElBQUFDLGNBQUFMLFFB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Q0Q7QUFDRCxRQUFHSyxPQUFPQyxJQUFQLENBQVlILE1BQU1JLGVBQU4sQ0FBc0JDLE9BQWxDLEVBQTJDN0IsTUFBOUMsRUFBdUQ7QUFDckQsWUFBSTZCLFVBQVVILE9BQU9DLElBQVAsQ0FBWUgsTUFBTUksZUFBTixDQUFzQkMsT0FBbEMsRUFBMkMsQ0FBM0MsQ0FBZDtBQUNBLGVBQU87QUFDTEUsc0JBQVdGLE9BRE47QUFFTEcsa0JBQU8sK0JBQStCSCxPQUEvQixHQUF5QztBQUYzQyxTQUFQO0FBSUQ7QUFDRCxXQUFPUixTQUFQO0FBQ0Q7QUFmREMsUUFBQVEsU0FBQSxHQUFBQSxTQUFBO0FBa0JBLFNBQUFHLFNBQUEsQ0FBMEJULEtBQTFCLEVBQXFEVSxNQUFyRCxFQUNFQyxRQURGLEVBQ21CO0FBQ2YsUUFBRyxDQUFDWCxLQUFKLEVBQVc7QUFDVDtBQUNEO0FBQ0QsUUFBSVcsU0FBU0MsV0FBVCxPQUEyQixRQUEzQixJQUF1Q0QsU0FBU0MsV0FBVCxPQUEyQixPQUF0RSxFQUErRTtBQUM3RSxZQUFJQyxJQUFJLEVBQVI7QUFDQUEsVUFBRU4sUUFBRixHQUFhRyxPQUFPSCxRQUFwQjtBQUNBTSxVQUFFQyxRQUFGLEdBQWEsR0FBYjtBQUNBRCxVQUFFRSxhQUFGLEdBQWtCSixRQUFsQjtBQUNBO0FBQ0FYLGNBQU1JLGVBQU4sQ0FBc0JZLFFBQXRCLENBQStCTixPQUFPSCxRQUF0QyxJQUFrRE0sQ0FBbEQ7QUFDQSxlQUFPYixNQUFNSSxlQUFOLENBQXNCQyxPQUF0QixDQUE4QkssT0FBT0gsUUFBckMsQ0FBUDtBQUNGO0FBQ0g7QUFkRFQsUUFBQVcsU0FBQSxHQUFBQSxTQUFBIiwiZmlsZSI6Im1hdGNoL2FuYWx5emUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqXG4gKiBAbW9kdWxlIGpmc2ViLmZkZXZzdGFydC5hbmFseXplXG4gKiBAZmlsZSBhbmFseXplLnRzXG4gKiBAY29weXJpZ2h0IChjKSAyMDE2IEdlcmQgRm9yc3RtYW5uXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCAqIGFzIElucHV0RmlsdGVyIGZyb20gJy4vaW5wdXRGaWx0ZXInO1xuXG5pbXBvcnQgKiBhcyBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5cbmNvbnN0IGRlYnVnbG9nID0gZGVidWcoJ2FuYWx5emUnKTtcblxuXG5cbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuLi91dGlscy9sb2dnZXInO1xudmFyIHBlcmYgPSBsb2dnZXIucGVyZignYW5hbHl6ZScpO1xuXG5cbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzL3V0aWxzJztcblxuaW1wb3J0ICogYXMgSU1hdGNoIGZyb20gJy4vaWZtYXRjaCc7XG5cbmltcG9ydCAqIGFzIFRvb2xtYXRjaGVyIGZyb20gJy4vdG9vbG1hdGNoZXInO1xuXG5pbXBvcnQgKiBhcyBTZW50ZW5jZSBmcm9tICcuL3NlbnRlbmNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFuYWx5emVBbGwoc1N0cmluZzogc3RyaW5nLCBydWxlczogSU1hdGNoLlNwbGl0UnVsZXMsIGFUb29sczogQXJyYXk8SU1hdGNoLklUb29sPiwgd29yZHM/ICkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgaWYgKHNTdHJpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IGVsc2Uge1xuICAgIHBlcmYoJ2FuYWx5emVTdHJpbmcnKTtcbiAvLyAgIElucHV0RmlsdGVyLnJlc2V0Q250KCk7XG4gICAgdmFyIG1hdGNoZWQgPSBJbnB1dEZpbHRlci5hbmFseXplU3RyaW5nKHNTdHJpbmcsIHJ1bGVzLCB3b3Jkcyk7XG4gICAgcGVyZignYW5hbHl6ZVN0cmluZycpO1xuIC8vICAgSW5wdXRGaWx0ZXIuZHVtcENudCgpO1xuICAgIHBlcmYoJ2V4cGFuZCcpO1xuICAgIGRlYnVnbG9nKFwiQWZ0ZXIgbWF0Y2hlZCBcIiArIEpTT04uc3RyaW5naWZ5KG1hdGNoZWQpKTtcbiAgICB2YXIgYVNlbnRlbmNlcyA9IElucHV0RmlsdGVyLmV4cGFuZE1hdGNoQXJyKG1hdGNoZWQpO1xuXG4gICAgYVNlbnRlbmNlcy5zb3J0KFNlbnRlbmNlLmNtcFJhbmtpbmdQcm9kdWN0KTtcbiAgICBkZWJ1Z2xvZyhcImFmdGVyIGV4cGFuZFwiICsgYVNlbnRlbmNlcy5tYXAoZnVuY3Rpb24gKG9TZW50ZW5jZSkge1xuICAgICAgcmV0dXJuIFNlbnRlbmNlLnJhbmtpbmdQcm9kdWN0KG9TZW50ZW5jZSkgKyBcIjpcIiArIFNlbnRlbmNlLmR1bXBOaWNlKG9TZW50ZW5jZSk7XG4gICAgfSkuam9pbihcIlxcblwiKSk7XG4gICAgaWYgKGRlYnVnbG9nLmVuYWJsZWQpIHtcbiAgICAgIGRlYnVnbG9nKFwiIGFmdGVyIGV4cGFuZDpcIiArIFNlbnRlbmNlLmR1bXBOaWNlQXJyKGFTZW50ZW5jZXNSZWluZm9yY2VkLCBTZW50ZW5jZS5yYW5raW5nUHJvZHVjdCkpO1xuICAgIH1cbiAgICBwZXJmKCdleHBhbmQnKTtcbiAgICB2YXIgYVNlbnRlbmNlc1JlaW5mb3JjZWQgPSBJbnB1dEZpbHRlci5yZWluRm9yY2UoYVNlbnRlbmNlcyk7XG4gICAgLy9hU2VudGVuY2VzLm1hcChmdW5jdGlvbihvU2VudGVuY2UpIHsgcmV0dXJuIElucHV0RmlsdGVyLnJlaW5Gb3JjZShvU2VudGVuY2UpOyB9KTtcbiAgICBhU2VudGVuY2VzUmVpbmZvcmNlZC5zb3J0KFNlbnRlbmNlLmNtcFJhbmtpbmdQcm9kdWN0KTtcbiAgICBkZWJ1Z2xvZyhcImFmdGVyIHJlaW5mb3JjZSBcXG5cIiArIGFTZW50ZW5jZXNSZWluZm9yY2VkLm1hcChmdW5jdGlvbiAob1NlbnRlbmNlKSB7XG4gICAgICByZXR1cm4gU2VudGVuY2UucmFua2luZ1Byb2R1Y3Qob1NlbnRlbmNlKSArIFwiOlwiICsgU2VudGVuY2UuZHVtcE5pY2Uob1NlbnRlbmNlKTtcbiAgICB9KS5qb2luKFwiXFxuXCIpKTtcbiAgICBpZiAoZGVidWdsb2cuZW5hYmxlZCkge1xuICAgICAgZGVidWdsb2coXCIgYWZ0ZXIgcmVpbmZvcmNlOlwiICsgU2VudGVuY2UuZHVtcE5pY2VBcnIoYVNlbnRlbmNlc1JlaW5mb3JjZWQsIFNlbnRlbmNlLnJhbmtpbmdQcm9kdWN0KSk7XG4gICAgfVxuICAgIGFTZW50ZW5jZXNSZWluZm9yY2VkID0gU2VudGVuY2UuY3V0b2ZmU2VudGVuY2VBdFJhdGlvKGFTZW50ZW5jZXNSZWluZm9yY2VkKVxuICAgIHBlcmYoJ21hdGNoVG9vbHMnKTtcbiAgICB2YXIgbWF0Y2hlZFRvb2xzID0gVG9vbG1hdGNoZXIubWF0Y2hUb29scyhhU2VudGVuY2VzUmVpbmZvcmNlZCwgYVRvb2xzKTsgLy9hVG9vbDogQXJyYXk8SU1hdGNoLklUb29sPik6IGFueSAvKiBvYmplY3RzdHJlYW0qLyB7XG4gICAgcGVyZignbWF0Y2hUb29scycpO1xuICAgIGRlYnVnbG9nKFwiIG1hdGNoZWRUb29sc1wiICsgSlNPTi5zdHJpbmdpZnkobWF0Y2hlZFRvb2xzLCB1bmRlZmluZWQsIDIpKTtcbiAgICByZXR1cm4gbWF0Y2hlZFRvb2xzO1xuICB9XG59XG5cbi8qKlxuICogVE9ETzogcmV3b3JrIHRoaXMgdG8gd29yayBjb3JyZWN0bHkgd2l0aCBzZXRzXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29tcGxldGUobWF0Y2ggOiAgSU1hdGNoLklUb29sTWF0Y2gpIHtcbiAgLy8gVE9ETyAtPiBhbmFseXplIHNldHNcbiAgcmV0dXJuIG1hdGNoICYmIG1hdGNoLnJhbmsgPiAwLjYgJiZcbiAgICBPYmplY3Qua2V5cyhtYXRjaC50b29sbWF0Y2hyZXN1bHQubWlzc2luZyB8fHt9KS5sZW5ndGggPT09IDBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb21wdChtYXRjaCA6ICBJTWF0Y2guSVRvb2xNYXRjaCkge1xuICBpZighbWF0Y2gpIHtcbiAgICAgIHJldHVybjtcbiAgfVxuICBpZiAobWF0Y2gucmFuayA8IDAuNiApIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmKE9iamVjdC5rZXlzKG1hdGNoLnRvb2xtYXRjaHJlc3VsdC5taXNzaW5nKS5sZW5ndGggKSB7XG4gICAgdmFyIG1pc3NpbmcgPSBPYmplY3Qua2V5cyhtYXRjaC50b29sbWF0Y2hyZXN1bHQubWlzc2luZylbMF07XG4gICAgcmV0dXJuIHtcbiAgICAgIGNhdGVnb3J5IDogbWlzc2luZyxcbiAgICAgIHRleHQgOiAnUGxlYXNlIHByb3ZpZGUgYSBtaXNzaW5nIFwiJyArIG1pc3NpbmcgKyAnXCI/J1xuICAgIH1cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRQcm9tcHQobWF0Y2ggOiBJTWF0Y2guSVRvb2xNYXRjaCwgcHJvbXB0OiBJTWF0Y2guSVByb21wdCxcbiAgcmVzcG9uc2UgOiBzdHJpbmcpIHtcbiAgICBpZighbWF0Y2gpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkgIT09ICdjYW5jZWwnICYmIHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkgIT09ICdhYm9ydCcpIHtcbiAgICAgIHZhciB1ID0ge30gYXMgSU1hdGNoLklXb3JkO1xuICAgICAgdS5jYXRlZ29yeSA9IHByb21wdC5jYXRlZ29yeTtcbiAgICAgIHUuX3JhbmtpbmcgPSAxLjA7XG4gICAgICB1Lm1hdGNoZWRTdHJpbmcgPSByZXNwb25zZTtcbiAgICAgIC8vLyBUT0RPIHRlc3Qgd2hldGhlciB0aGlzIGNhbiBiZSB2YWxpZCBhdCBhbGw/XG4gICAgICBtYXRjaC50b29sbWF0Y2hyZXN1bHQucmVxdWlyZWRbcHJvbXB0LmNhdGVnb3J5XSA9IHU7XG4gICAgICBkZWxldGUgbWF0Y2gudG9vbG1hdGNocmVzdWx0Lm1pc3NpbmdbcHJvbXB0LmNhdGVnb3J5XTtcbiAgIH1cbn1cblxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
