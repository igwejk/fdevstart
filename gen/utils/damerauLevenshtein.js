'use strict';
// based on: http://en.wikibooks.org/wiki/Algorithm_implementation/Strings/Levenshtein_distance
// and:  http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance

function levenshtein(a, b) {
    var i;
    var j;
    var cost;
    var d = [];
    if (a.length === 0) {
        return b.length;
    }
    if (b.length === 0) {
        return a.length;
    }
    for (i = 0; i <= a.length; i++) {
        d[i] = [];
        d[i][0] = i;
    }
    for (j = 0; j <= b.length; j++) {
        d[0][j] = j;
    }
    for (i = 1; i <= a.length; i++) {
        for (j = 1; j <= b.length; j++) {
            if (a.charAt(i - 1) === b.charAt(j - 1)) {
                cost = 0;
            } else {
                cost = 1;
            }
            d[i][j] = Math.min(d[i - 1][j] + 1, d[i][j - 1] + 1, d[i - 1][j - 1] + cost);
            if (i > 1 && j > 1 && a.charAt(i - 1) === b.charAt(j - 2) && a.charAt(i - 2) === b.charAt(j - 1)) {
                d[i][j] = Math.min(d[i][j], d[i - 2][j - 2] + cost);
            }
        }
    }
    return d[a.length][b.length];
}
exports.levenshtein = levenshtein;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlscy9kYW1lcmF1TGV2ZW5zaHRlaW4udHMiXSwibmFtZXMiOlsibGV2ZW5zaHRlaW4iLCJhIiwiYiIsImkiLCJqIiwiY29zdCIsImQiLCJsZW5ndGgiLCJjaGFyQXQiLCJNYXRoIiwibWluIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFFQTtBQUNBOztBQUVBLFNBQUFBLFdBQUEsQ0FBNkJDLENBQTdCLEVBQXlDQyxDQUF6QyxFQUFtRDtBQUNqRCxRQUFJQyxDQUFKO0FBQ0EsUUFBSUMsQ0FBSjtBQUNBLFFBQUlDLElBQUo7QUFDQSxRQUFJQyxJQUFJLEVBQVI7QUFDQSxRQUFJTCxFQUFFTSxNQUFGLEtBQWEsQ0FBakIsRUFBb0I7QUFDbEIsZUFBT0wsRUFBRUssTUFBVDtBQUNEO0FBQ0QsUUFBSUwsRUFBRUssTUFBRixLQUFhLENBQWpCLEVBQW9CO0FBQ2xCLGVBQU9OLEVBQUVNLE1BQVQ7QUFDRDtBQUNELFNBQUtKLElBQUksQ0FBVCxFQUFZQSxLQUFLRixFQUFFTSxNQUFuQixFQUEyQkosR0FBM0IsRUFBZ0M7QUFDOUJHLFVBQUdILENBQUgsSUFBUyxFQUFUO0FBQ0FHLFVBQUdILENBQUgsRUFBUSxDQUFSLElBQWNBLENBQWQ7QUFDRDtBQUNELFNBQUtDLElBQUksQ0FBVCxFQUFZQSxLQUFLRixFQUFFSyxNQUFuQixFQUEyQkgsR0FBM0IsRUFBZ0M7QUFDOUJFLFVBQUcsQ0FBSCxFQUFRRixDQUFSLElBQWNBLENBQWQ7QUFDRDtBQUNELFNBQUtELElBQUksQ0FBVCxFQUFZQSxLQUFLRixFQUFFTSxNQUFuQixFQUEyQkosR0FBM0IsRUFBZ0M7QUFDOUIsYUFBS0MsSUFBSSxDQUFULEVBQVlBLEtBQUtGLEVBQUVLLE1BQW5CLEVBQTJCSCxHQUEzQixFQUFnQztBQUM5QixnQkFBSUgsRUFBRU8sTUFBRixDQUFTTCxJQUFJLENBQWIsTUFBb0JELEVBQUVNLE1BQUYsQ0FBU0osSUFBSSxDQUFiLENBQXhCLEVBQXlDO0FBQ3ZDQyx1QkFBTyxDQUFQO0FBQ0QsYUFGRCxNQUVPO0FBQ0xBLHVCQUFPLENBQVA7QUFDRDtBQUVEQyxjQUFHSCxDQUFILEVBQVFDLENBQVIsSUFBY0ssS0FBS0MsR0FBTCxDQUFTSixFQUFHSCxJQUFJLENBQVAsRUFBWUMsQ0FBWixJQUFrQixDQUEzQixFQUE4QkUsRUFBR0gsQ0FBSCxFQUFRQyxJQUFJLENBQVosSUFBa0IsQ0FBaEQsRUFBbURFLEVBQUdILElBQUksQ0FBUCxFQUFZQyxJQUFJLENBQWhCLElBQXNCQyxJQUF6RSxDQUFkO0FBRUEsZ0JBRUVGLElBQUksQ0FBSixJQUVBQyxJQUFJLENBRkosSUFJQUgsRUFBRU8sTUFBRixDQUFTTCxJQUFJLENBQWIsTUFBb0JELEVBQUVNLE1BQUYsQ0FBU0osSUFBSSxDQUFiLENBSnBCLElBTUFILEVBQUVPLE1BQUYsQ0FBU0wsSUFBSSxDQUFiLE1BQW9CRCxFQUFFTSxNQUFGLENBQVNKLElBQUksQ0FBYixDQVJ0QixFQVVFO0FBQ0FFLGtCQUFFSCxDQUFGLEVBQUtDLENBQUwsSUFBVUssS0FBS0MsR0FBTCxDQUVSSixFQUFFSCxDQUFGLEVBQUtDLENBQUwsQ0FGUSxFQUlSRSxFQUFFSCxJQUFJLENBQU4sRUFBU0MsSUFBSSxDQUFiLElBQWtCQyxJQUpWLENBQVY7QUFPRDtBQUNGO0FBQ0Y7QUFFRCxXQUFPQyxFQUFHTCxFQUFFTSxNQUFMLEVBQWVMLEVBQUVLLE1BQWpCLENBQVA7QUFDRDtBQW5EZUksUUFBQVgsV0FBQSxHQUFXQSxXQUFYIiwiZmlsZSI6InV0aWxzL2RhbWVyYXVMZXZlbnNodGVpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xyXG5cclxuLy8gYmFzZWQgb246IGh0dHA6Ly9lbi53aWtpYm9va3Mub3JnL3dpa2kvQWxnb3JpdGhtX2ltcGxlbWVudGF0aW9uL1N0cmluZ3MvTGV2ZW5zaHRlaW5fZGlzdGFuY2VcclxuLy8gYW5kOiAgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EYW1lcmF1JUUyJTgwJTkzTGV2ZW5zaHRlaW5fZGlzdGFuY2VcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsZXZlbnNodGVpbiAoYSA6IHN0cmluZywgYiA6IHN0cmluZykge1xyXG4gIHZhciBpIDogbnVtYmVyXHJcbiAgdmFyIGogOiBudW1iZXJcclxuICB2YXIgY29zdCA6IG51bWJlclxyXG4gIHZhciBkID0gW11cclxuICBpZiAoYS5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiBiLmxlbmd0aFxyXG4gIH1cclxuICBpZiAoYi5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiBhLmxlbmd0aFxyXG4gIH1cclxuICBmb3IgKGkgPSAwOyBpIDw9IGEubGVuZ3RoOyBpKyspIHtcclxuICAgIGRbIGkgXSA9IFtdXHJcbiAgICBkWyBpIF1bIDAgXSA9IGlcclxuICB9XHJcbiAgZm9yIChqID0gMDsgaiA8PSBiLmxlbmd0aDsgaisrKSB7XHJcbiAgICBkWyAwIF1bIGogXSA9IGpcclxuICB9XHJcbiAgZm9yIChpID0gMTsgaSA8PSBhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBmb3IgKGogPSAxOyBqIDw9IGIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgaWYgKGEuY2hhckF0KGkgLSAxKSA9PT0gYi5jaGFyQXQoaiAtIDEpKSB7XHJcbiAgICAgICAgY29zdCA9IDBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb3N0ID0gMVxyXG4gICAgICB9XHJcblxyXG4gICAgICBkWyBpIF1bIGogXSA9IE1hdGgubWluKGRbIGkgLSAxIF1bIGogXSArIDEsIGRbIGkgXVsgaiAtIDEgXSArIDEsIGRbIGkgLSAxIF1bIGogLSAxIF0gKyBjb3N0KVxyXG5cclxuICAgICAgaWYgKFxyXG5cclxuICAgICAgICBpID4gMSAmJlxyXG5cclxuICAgICAgICBqID4gMSAmJlxyXG5cclxuICAgICAgICBhLmNoYXJBdChpIC0gMSkgPT09IGIuY2hhckF0KGogLSAyKSAmJlxyXG5cclxuICAgICAgICBhLmNoYXJBdChpIC0gMikgPT09IGIuY2hhckF0KGogLSAxKVxyXG5cclxuICAgICAgKSB7XHJcbiAgICAgICAgZFtpXVtqXSA9IE1hdGgubWluKFxyXG5cclxuICAgICAgICAgIGRbaV1bal0sXHJcblxyXG4gICAgICAgICAgZFtpIC0gMl1baiAtIDJdICsgY29zdFxyXG5cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBkWyBhLmxlbmd0aCBdWyBiLmxlbmd0aCBdXHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
